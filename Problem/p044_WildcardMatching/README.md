# p44_Wildcard Matching

###### tags: `LeetCode` `Hard`

## 題目
[原題目連結](https://leetcode.com/problems/wildcard-matching/)

給你一個字串(s)和正規表達(p\)，請求出s是否滿足p的表達式?

p會包含兩種符號：
* `*`：萬用字元，可以表達任意順序、長度的字串。
* `?`：可以表達任意**一個**字元。

## 解題
看到這題就讓我想起 [p010_Regular Expression Matching](https://github.com/AndyChiangSH/LeetCode/tree/master/Problem/p010_RegularExpressionMatching)，所以首先嘗試使用動態規劃。

### DP
這題也是建立一個(M+1)\*(N+1)的二維陣列dp，陣列`dp[i][j]`代表`s[0:i]`子字串是否滿足`t[0:j]`子字串。(M為s長度，N為p長度)

不過這題規則比第十題好找很多，大致說明如下，我舉`s="abc"`，`p="a?c*"`為例，答案為True：
* `dp[0][0]`一定為T，因為空正規式滿足空字串。
* 先掃第一列，如果讀到`*`以外的字元，則後面的都為F。因為只有`*`可以滿足空字串，其他的都不行。
* 第一欄也都是F，因為空正規式不可能滿足任何字串(除了空字串)。

![](https://i.imgur.com/f0bkTwl.jpg)

* (#1) **其餘的如果`p[i] == s[j]`**，則`dp[i][j]`等於`dp[i-1][j-1]`(左上角)的值。

看下面例子，假如p和s不加上a是T的話，那因為p和s都一樣是a，加上a之後一樣是T。

![](https://i.imgur.com/BRDbtGM.jpg)

* (#2) **如果`p[i] == '?'`**，則`dp[i][j]`等於`dp[i-1][j-1]`(左上角)的值。

因為`?`可以代表任意字元，所以理由跟(#1)是一樣的。

![](https://i.imgur.com/4yb39NB.jpg)

* (#3) **如果`p[i] == '*'`**，則`dp[i][j]`等於`dp[i-1][j]`(上) **||** `dp[i][j-1]`(左)的值。

因為`*`可以代表空字串或任意字串，**如果從左邊來的代表`*`作為空字串使用，來自上面代表`*`作為任意字串使用**。

![](https://i.imgur.com/7XI5k7Z.jpg)

* (#4) 非以上條件就是F。

非以上條件表示`p[i] != s[j]`，因為最後一個字母不相同，s和p不可能符合。

還是不懂可以想想看`*a`和`*b`有可能相符嗎?

最後`dp[M][N]`即為答案。

#### ⏳ 時間複雜度：O(M\*N)
#### 💾 空間複雜度：O(M\*N)
M = s.length(), N = p.length()

### Greedy
後來看Discuss發現，這題其實不用動態規劃這麼麻煩，主要原因是因為`*`可以代表**任意順序的字串**，因此使用貪婪法就是正確解了。

作法大概是這樣：
* 兩個點i、j分別走在s和p上。
* star紀錄最後一個`*`所在位置。
* last_match紀錄最長滿足條件的字串長度。
* 如果`p[i] == s[j]`或`p[i] == '?'`則i++、j++。
* 如果`p[i] == '*'`，則更新star和last_match。
* 其他情況則j回到star+1的位置，i和last_match向前移動一格。
* 最後檢查p是否有被整個跑過(j == N)，就是答案了。

這作法類似DFS反覆測試是否正確，但差別在於因為`*`可以代表**任意順序的字串**，因此只需要紀錄最後`*`的位置就好，因為不管怎樣都只和最後一個有關。

我以`p="a*b*c"`為例，可以滿足的 s 有(使用空白區分每一個符號，"_"表示空字串)。
```
p = a *  b *  c 
s = a _  b bb c
s = a b  b b  c
s = a bb b _  c
```

得知了前面的`*`其實怎樣都無所謂，反正後面的`*`會將多的部份給吃掉。

#### ⏳ 時間複雜度
* Best case：O(M+N)
* Worst case：O((M^2^)/2+N)
#### 💾 空間複雜度：O(M+N)
M = s.length(), N = p.length()

## 結果
### DP
> 07/27/2021 12:32	Accepted	27 ms	39.7 MB	java  
> ⏳ 時間：44.57%  
> 💾 空間：43.68%  

### Greedy
> 07/27/2021 22:16	Accepted	2 ms	39.1 MB	java  
> ⏳ 時間：100.00%  
> 💾 空間：89.57%  

## 後記
沒想到有比DP更快的解法，真是大開眼界。